<!DOCTYPE html>
<html lang="ko">
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="description" content="">
   <meta name="viewport" content="width=device-width">
   <title>Episoden</title>
   <link rel="shortcut icon" href="images/favicon.ico">
   <link rel="stylesheet" type="text/css" href="css/style.css" />
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
   <style>
     .topic p {width:auto !important}
     #texte-animation {
        position:relative;
        overflow: hidden;
         height:100%;
         display:flex;align-items:center;
         width:90%;
         margin:0 auto
      }
      .bouncer {overflow:initial !important}
      .ball { 
      position: absolute;
      top: 0;  
      left: -20px;
      width: 10px;
      height: 10px;
      border-radius: 100%;
      background: #9b51e0; 
      margin-left: -5px;
      transition-property: left, top;
      transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1), cubic-bezier(0.25, 0.1, 0.25, 1);
      }
      #texte-animation p {
      position: relative; 
      margin: 0;
      display: inline-block;
      text-align: center;
      font-size: 20px;
      outline: none;
      font-family: 'Alef', sans-serif;
      }
      .word.lit {
      color: #9b51e0;
      text-shadow: 0px 0px 3px #9b51e0;
      }


     
      @media screen and (max-width: 1024px){
         .topic {height:100% !important}
      }
   </style>
   <script>
      $(document).ready(function(){
         // Set bounce animation speed
      var bounceSpeed = 7;

      var Bouncer = function (elem) {
      // init bouncable element and helpers
      this.$elem = $(elem);
      this.$ball = $('<div class="ball"></div>');
      this.$space = $("<span> </span>");
      this.timers = [];

      // handle in-place editing events
      this.$elem.on(
         "blur",
         (function (instance) {
            return function () {
            instance.init();
            instance.bounce();
            };
         })(this)
      );

      this.$elem.on("keypress", function (e) {
         var code = e.keyCode ? e.keyCode : e.which;
         if (code == 13) {
            $(this).blur();
         }
      });

      // make it bounce
      this.init();
      this.bounce();
      };

      Bouncer.prototype.init = function () {
      // get element text for parsing
      this.elemText = this.$elem.text();

      // clone element for new text injection
      this.$cloned = this.$elem
         .clone()
         .empty()
         .addClass("cloned")
         .removeAttr("contenteditable")
         .appendTo(this.$elem.parent());

      // handle cloned element termination
      this.$cloned.on(
         "click",
         (function (instance) {
            return function () {
            instance.reset();
            instance.$elem.focus();
            document.execCommand("selectAll", false, null);
            };
         })(this)
      );

      this.$elem.hide(); // hide original element while animating
      this.$ball.appendTo(this.$cloned); // add ball to new element
      this.contentArray = this.elemText.split(" ");
      };

      Bouncer.prototype.bounce = function () {
      // ball animation incrementing delay
      var incrementingDelay = 0;

      // run through the text
      for (var j = 0; j < this.contentArray.length; j++) {
         var word = this.contentArray[j];

         // handle multiple spaces
         if (/\s/g.test(word)) {
            this.$space.clone().appendTo(this.$cloned);
            this.contentArray.splice(j, 1);
            j--;
            continue;
         }

         // escape each word with a span, add it to cloned element
         var $word = $('<span class="word">' + word + "</span>");
         this.$cloned.append($word);
         var wordLength = $word.width();

         // add white space elements between words
         if (j + 1 < this.contentArray.length) {
            this.$space.clone().appendTo(this.$cloned);
         }

         // get ball position above word
         var ballLeft = $word[0].offsetLeft + wordLength / 2;
         var ballTop = $word[0].offsetTop;

         var ballProps = {
            left: ballLeft,
            top: ballTop,
            wordLength: wordLength,
            wordIndex: j
         };

         // preset timers for the whole text
         var timer = setTimeout(
            (function (instance, ballProps) {
            return function () {
               instance.animateBall(ballProps);
            };
            })(this, ballProps),
            incrementingDelay
         );
         this.timers.push(timer);

         incrementingDelay += wordLength * bounceSpeed;
      }

      // hide ball when finished bouncing
      var timer = setTimeout(
         (function (instance) {
            return function () {
            instance.$ball.fadeOut();
            };
         })(this),
         incrementingDelay
      );
      this.timers.push(timer);
      };

      Bouncer.prototype.animateBall = function (ballProps) {
      // set ball transition duration per word length
      var leftDuration = ballProps.wordLength * bounceSpeed + "ms";
      var topDuration = (ballProps.wordLength * bounceSpeed) / 2 + "ms";
      this.$ball.css("transition-duration", leftDuration + ", " + topDuration);

      // animate ball halfway and up
      var ballOffsetLeft = this.$ball[0].offsetLeft;
      var delta = ballProps.left - ballOffsetLeft;
      var ballHalfWay = ballOffsetLeft + delta;
      this.$ball.css({ left: ballHalfWay + "px", top: "-50px" });

      // finish animation when the ball reach halfway
      var halfwayReached = (ballProps.wordLength * bounceSpeed) / 2;
      var timer = setTimeout(
         (function (instance, ballProps) {
            return function () {
            // animate ball to finish the bounce
            instance.$ball.css({ left: ballProps.left + "px", top: "0px" });

            // light the bounced word when the ball bounces on it
            var bouncedOnWord = (ballProps.wordLength * bounceSpeed) / 2;
            var timer = setTimeout(
               (function (instance, ballProps) {
                  return function () {
                  instance.$cloned
                     .find(".word")
                     .eq(ballProps.wordIndex)
                     .addClass("lit");
                  };
               })(instance, ballProps),
               bouncedOnWord
            );
            instance.timers.push(timer);
            };
         })(this, ballProps),
         halfwayReached
      );
      this.timers.push(timer);
      };

      Bouncer.prototype.reset = function () {
      for (var i = 0; i < this.timers.length; i++) {
         clearTimeout(this.timers[i]);
      }
      this.timers.length = 0;

      this.$elem.show();
      this.$cloned.remove();
      this.$ball.removeAttr("style");
      };

      var bouncers = [];
      $(document).ready(function () {
      // make all 'bouncer' classes, bounce
      $(".bouncer").each(function (index, element) {
         bouncers.push(new Bouncer(element));
      });

      // handle light switch
      $(".light-switch").on("click", function () {
         $("body").toggleClass("dark");

         for (var i = 0; i < bouncers.length; i++) {
            bouncers[i].reset();
            bouncers[i].init();
            bouncers[i].bounce();
         }
      });

      // show hint
      $(".hint").removeClass("preload");
      setTimeout(function () {
         $(".hint").addClass("open");
         setTimeout(function () {
            $(".hint").removeClass("open");
         }, 4000);
      }, 6000);
      });

      });
   </script>
</head>
<body>
   <div class="wrapper">
      <div class="eventWrapper">
         <div class="eventRoomPage topicEvent">
            <section class="localVideo">
               <div class="inner">
                  <div class="video">
                     <video style="background:url('images/sample/sample_user02.png') no-repeat center center;background-size:cover"></video>
                     <div class="name">
                        <img src="https://flagcdn.com/h20/us.png" height="10" alt="United States">
                        <span>Jennifer</span>
                     </div>
                  </div>
                  <!-- [i] 텍스트 출력 -->
                  <div class="topic">
                     <div id="texte-animation">
                        <p class="bouncer" contenteditable>Among people you know, who do you think experienced the most embarrassing moment? Among people you know, who do you think experienced the most embarrassing moment? Among people you know, who do you think experienced the most embarrassing moment?</p>
                     </div>
                  </div>
               </div>
            </section>
            <section class="mainVideo">
               <div class="video" style="width:1280px">
                  <video style="background:url('images/sample/sample_user01.png') no-repeat center center;background-size:cover"></video>
                  <div class="name">
                     <img src="https://flagcdn.com/h20/us.png" height="13" alt="United States">
                     <span>Christine</span>
                  </div>
               </div>
               <div class="timer">
                  <span>Time left</span>
                  <strong>07:00</strong>
               </div>
               <div class="inner">
                  <div class="menu">
                     <ul>
                        <li>
                           <button class="mic" data-title="Mute"></button>
                        </li>
                        <li>
                           <button class="message" data-title="Message"></button>
                        </li>
                        <li>
                           <button class="profile" data-title="Profile"></button>
                        </li>
                        <li>
                           <button class="report" data-title="Report"></button>
                        </li>
                        <li>
                           <button class="setting" data-title="Setting"></button>
                        </li>
                     </ul>
                  </div>
               </div>
            </section>
         </div>
      </div>
   </div>
</body>
</html>
